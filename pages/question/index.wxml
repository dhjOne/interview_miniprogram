<!-- <nav nav-type="title" title="{{categoryName || '题库列表'}}" /> -->

<view class="question-list-container">
  <!-- 搜索区域 -->
  <view class="search-section">
    <t-search
      value="{{searchValue}}"
      placeholder="搜索题目..."
      bind:change="onSearchChange"
      bind:search="onSearch"
      bind:clear="onSearchClear"
      shape="round"
    ></t-search>
  </view>

  <!-- 筛选条件 -->
  <view class="filter-section">
    <scroll-view class="filter-tags-scroll" scroll-x="true" show-scrollbar="{{false}}">
      <view class="filter-tags">
        <t-tag
          wx:for="{{filterTags}}"
          wx:key="value"
          theme="{{activeFilter === item.value ? 'primary' : 'outline'}}"
          bind:click="onFilterChange"
          data-value="{{item.value}}"
          size="medium"
        >
          {{item.label}}
        </t-tag>
      </view>
    </scroll-view>
  </view>

  <!-- 题目统计 -->
  <view class="questions-stats" wx:if="{{questionList.length > 0}}">
    <text class="stats-text">共 {{totalCount}} 道题目</text>
    <view class="sort-options">
      <t-radio-group value="{{sortType}}" bind:change="onSortChange">
        <t-radio value="default">默认</t-radio>
        <t-radio value="latest">最新</t-radio>
        <t-radio value="hot">热门</t-radio>
      </t-radio-group>
    </view>
  </view>

  <!-- 题目列表 -->
  <view class="questions-section">
    <scroll-view 
      class="questions-scroll" 
      scroll-y="true" 
      bindscroll="onPageScroll"
      bindscrolltolower="loadMore"
    >
      <view class="question-list">
        <block wx:for="{{questionList}}" wx:key="id" wx:for-index="idx">
          <view 
            class="question-item {{item.isCollected ? 'collected' : ''}}"
            bindtap="onQuestionClick"
            data-id="{{item.id}}"
            data-title="{{item.title}}"
          >
            <view class="question-header">
              <view class="question-index">
                <text class="index-number">{{(page - 1) * pageSize + idx + 1}}</text>
              </view>
              <view class="question-main">
                <view class="question-title-section">
                  <text class="question-title">{{item.title || '无标题'}}</text>
                </view>
                <view class="question-meta">
                  <text class="meta-item">
                    <t-icon name="time" size="24rpx"></t-icon>
                    {{item.createAt || '未知时间'}}
                  </text>
                  <text class="meta-item">
                    <t-icon name="view" size="24rpx"></t-icon>
                    {{item.viewCount || 0}} 浏览
                  </text>
                  <text class="meta-item">
                    <t-icon name="app" size="24rpx"></t-icon>
                    {{item.commentCount || 0}} 评论
                  </text>
                </view>
              </view>
              <view class="question-actions">
                <view catchtap="onCollect" data-id="{{item.id}}">
                  <t-icon
                    name="{{item.collected ? 'heart-filled' : 'heart'}}"
                    size="36rpx"
                    color="{{item.collected ? '#ff6b35' : '#999'}}"
                    class="collect-icon"
                  ></t-icon>
                </view>
              </view>
            </view>
            
            <!-- 题目描述 -->
            <view wx:if="{{item.description}}" class="question-description">
              <text class="description-text">{{item.description}}</text>
            </view>
          </view>
        </block>
      </view>

      <!-- 加载状态 -->
      <!-- <view class="load-more">
        <t-loading 
          wx:if="{{loading}}" 
          size="32rpx" 
          text="{{page === 1 ? '加载中...' : '加载更多...'}}" 
        />
        <t-button
          wx:elif="{{hasMore && !loading}}"
          theme="outline"
          size="small"
          bindtap="loadMore"
        >
          加载更多
        </t-button>
        <view wx:elif="{{!hasMore && questionList.length > 0}}" class="no-more">
          <text class="no-more-text">— 没有更多题目了 —</text>
        </view>
      </view> -->

      <!-- 空状态 -->
      <view wx:if="{{questionList.length === 0 && !loading}}" class="empty-state">
        <t-icon name="file" size="120rpx" color="#ccc"></t-icon>
        <text class="empty-text">暂无题目</text>
        <text class="empty-desc">当前分类下还没有题目</text>
        <t-button theme="primary" bindtap="goRelease" class="empty-btn">
          发布题目
        </t-button>
      </view>
    </scroll-view>
  </view>
</view>

<!-- 回到顶部 -->
<view 
  wx:if="{{showBackTop}}" 
  class="back-top" 
  bindtap="scrollToTop"
  hover-class="back-top-hover"
>
  <t-icon name="caret-up" size="32rpx" color="#fff"></t-icon>
</view>

<float-release-button 
  bind:onTap="onReleaseTap"
/>